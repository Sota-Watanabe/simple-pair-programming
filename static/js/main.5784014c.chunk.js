(this["webpackJsonpsimple-pair-programming"]=this["webpackJsonpsimple-pair-programming"]||[]).push([[0],{133:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(44),i=n.n(c),o=n(1),l=n(8),u=n.n(l),s=n(28),m=n(9),d=n(45),p=n.n(d),f=(n(12),n(73),n(74),n(46)),O=n.n(f),g=null,b=r.a.memo((function(e){var t=Object(a.useContext)(S),n=Object(o.a)(t,1)[0],c=e.text;return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"Share Code"),r.a.createElement(O.a,{editorProps:{$blockScrolling:"true"},fontSize:"16px",height:"500px",highlightActiveLine:!1,mode:"c_cpp",style:{margin:"auto",maxWidth:"1024px"},name:"UNIQUE_ID_OF_DIV",onChange:function(){if(!0===n.canWrite){var t=g.getValue();e.setText(t);var a=e.dataConnection,r={canWrite:n.canWrite,editText:t};a.send(r)}},onLoad:function(e){g=e},showPrintMargin:!1,tabSize:4,theme:"chaos",readOnly:!n.canWrite,value:c,width:"80%",wrapEnabed:!1}))})),h=n(18),E=n.n(h),v=function(e){var t=e.dataConnection,n=Object(a.useContext)(S),c=Object(o.a)(n,2),i=c[0],l=c[1];return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},i.canWrite&&r.a.createElement("h3",{style:{marginY:"auto"}},"\u66f8\u304d\u8fbc\u307f\u30e2\u30fc\u30c9"),!i.canWrite&&r.a.createElement("h3",{style:{marginY:"auto"}},"\u8aad\u307f\u8fbc\u307f\u30e2\u30fc\u30c9"),r.a.createElement(E.a,{style:{marginLeft:"10px"},checked:i.canWrite,onChange:function(e){return n=e,t.send({canWrite:n}),void l(Object(m.a)(Object(m.a)({},i),{},{canWrite:n}));var n}}))},j=function(e){var t=e.localVideo,n=e.remoteVideo,c=Object(a.useState)(!0),i=Object(o.a)(c,2),l=i[0],u=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",maxWidth:"1000px",marginLeft:"10%"}},r.a.createElement("h3",null,"\u97f3\u58f0"),r.a.createElement(E.a,{style:{marginLeft:"20px",marginTop:"auto",marginBottom:"auto"},checked:!l,onChange:function(e){u(!e)}})),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",maxWidth:"1000px",margin:"auto"}},r.a.createElement("div",{style:{width:"40%"}},r.a.createElement("video",{width:"100%",autoPlay:!0,muted:l,playsInline:!0,style:{maxWidth:"400px"},ref:t})),r.a.createElement("div",{style:{width:"40%",textAlign:"center"}},r.a.createElement("video",{width:"100%",autoPlay:!0,muted:l,playsInline:!0,style:{maxWidth:"400px"},ref:n}))))},x=new p.a({key:Object({NODE_ENV:"production",PUBLIC_URL:"/simple-pair-programming",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SKYWAY_KEY}),y=function(){var e=Object(a.useContext)(S),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),l=Object(o.a)(i,2),d=l[0],p=l[1],f=Object(a.useState)(""),O=Object(o.a)(f,2),g=O[0],h=O[1],E=Object(a.useState)(""),y=Object(o.a)(E,2),C=y[0],W=y[1],w=Object(a.useState)(""),_=Object(o.a)(w,2),P=_[0],T=_[1],k=Object(a.useState)(!1),A=Object(o.a)(k,2),I=A[0],L=A[1],D=Object(a.useRef)(null),V=Object(a.useRef)(null);x.on("open",(function(){console.log("open"),p(x.id),null!==D.current&&(console.log("get localStream"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){D.current.srcObject=e})))}));var K=function(e){e.hasOwnProperty("editText")&&T(e.editText),c(Object(m.a)(Object(m.a)({},n),{},{canWrite:!e.canWrite}))};return x.on("connection",(function(e){W(e),e.on("data",(function(e){K(e)})),L(!0)})),x.on("call",(function(e){null!==D.current&&(e.answer(D.current.srcObject),e.on("stream",function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V.current.srcObject=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),r.a.createElement("div",null,!I&&r.a.createElement("div",{style:{marginLeft:"10%"}},r.a.createElement("div",null,d),r.a.createElement("input",{onChange:function(e){return h(e.target.value)}}),r.a.createElement("button",{onClick:function(){x.call(g,D.current.srcObject).on("stream",function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V.current.srcObject=t,e.next=3,V.current.play().catch(console.error);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L(!0);var e=x.connect(g);W(e),e.on("data",(function(e){K(e)}))}},"\u767a\u4fe1")),r.a.createElement(j,{localVideo:D,remoteVideo:V}),I&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{dataConnection:C}),r.a.createElement(b,{text:P,setText:T,dataConnection:C})))},S=Object(a.createContext)(),C=function(){var e=Object(a.useState)({canWrite:!1}),t=Object(o.a)(e,2),n=t[0],c=t[1];return r.a.createElement(S.Provider,{value:[n,c]},r.a.createElement("h1",{style:{textAlign:"center",padding:"50px"}},"Simple Pair Programming"),r.a.createElement(y,null))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root"))},47:function(e,t,n){e.exports=n(133)}},[[47,1,2]]]);
//# sourceMappingURL=main.5784014c.chunk.js.map